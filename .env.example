# ============================================================
# WishShare â€” Environment Configuration
# Copy this file to .env and fill in the values.
# ============================================================

# ---- Application URLs ----
BACKEND_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000

# Comma-separated list of allowed CORS origins (must include frontend URL)
BACKEND_CORS_ORIGINS=http://localhost:3000

# ---- Environment ----
# "local" uses SameSite=Lax cookies (HTTP-safe)
# "production" uses SameSite=None; Secure cookies (required for cross-origin HTTPS)
ENVIRONMENT=local

# ---- Database ----
# SQLite (development):
POSTGRES_DSN=sqlite+aiosqlite:///./wishshare.db
# PostgreSQL (production, uncomment and fill):
# POSTGRES_DSN=postgresql+asyncpg://wishshare:password@localhost:5432/wishshare

# ---- PostgreSQL (REQUIRED for Docker production) ----
# SECURITY: No default password - must be set explicitly
# POSTGRES_PASSWORD=your_secure_postgres_password_here

# ---- Redis (REQUIRED for Docker production) ----
# For local development without Redis, cache will be disabled automatically
REDIS_DSN=redis://localhost:6379/0
# Redis with password (production):
# REDIS_DSN=redis://:your_redis_password@redis:6379/0

# ---- Security (REQUIRED IN PRODUCTION) ----
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
# MUST be at least 32 characters. App will refuse to start with the default value.
JWT_SECRET_KEY=CHANGE_ME

# ---- JWT Configuration ----
# IMPORTANT: Generate a secure random key for production!
# Use: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=30

# ---- OAuth (optional) ----
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# ---- Email / SMTP (optional, for password reset) ----
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@wishshare.local
SMTP_USE_TLS=true

# ---- Email Notifications ----
# Email notifications for gift reservations and contributions
# Set to false to disable all notification emails
EMAIL_NOTIFICATIONS_ENABLED=true

# ---- Parser settings ----
# Optional browser fallback for anti-bot marketplaces (Ozon/Wildberries/Lamoda/etc)
# Requires: pip install playwright && playwright install chromium
# Comma-separated list of domains the URL parser is allowed to fetch (SSRF allowlist)
PARSER_BROWSER_DOMAINS=ozon.ru,wildberries.ru,wb.ru,lamoda.ru,dns-shop.ru,market.yandex.ru,yandex.ru,aliexpress.com,aliexpress.ru,amazon.com,amazon.ru
PARSER_BROWSER_FALLBACK=true
PARSER_BROWSER_TIMEOUT_MS=45000

# ---- Caching ----
# Enable/disable Redis caching for wishlists
WISHLIST_CACHE_ENABLED=true
WISHLIST_CACHE_TTL_PUBLIC=60
WISHLIST_CACHE_TTL_PRIVATE=20
WISHLIST_CACHE_TTL_LIST=15

# ---- Rate Limiting ----
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=10
RATE_LIMIT_WINDOW_SECONDS=60

# ---- Sentry Error Monitoring (optional) ----
# Get DSN from: https://sentry.io/settings/projects/
# Leave empty to disable Sentry integration
SENTRY_DSN=

# Frontend Sentry Configuration
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_AUTH_TOKEN=
SENTRY_ORG=
SENTRY_PROJECT=

# ---- Logging ----
LOG_LEVEL=INFO
# LOG_FILE=/var/log/wishshare.log
