@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg-0: #0b0b0f;
    --bg-1: #12121b;
    --bg-2: #1a1b28;
    --surface: rgba(20, 22, 34, 0.7);
    --surface-strong: rgba(24, 26, 38, 0.88);
    --line: rgba(255, 218, 161, 0.12);
    --line-strong: rgba(255, 209, 132, 0.32);
    --text-primary: #f7f0e6;
    --text-secondary: #c1b7a6;
    --accent: #ffb86b;
    --accent-2: #7b7dff;
    
    /* iOS Safe Areas */
    --sat: env(safe-area-inset-top);
    --sar: env(safe-area-inset-right);
    --sab: env(safe-area-inset-bottom);
    --sal: env(safe-area-inset-left);
  }

  html,
  body {
    min-height: 100%;
  }

  body {
    background:
      radial-gradient(1200px 720px at 6% -10%, rgba(255, 184, 107, 0.16), transparent 60%),
      radial-gradient(980px 640px at 100% 10%, rgba(123, 125, 255, 0.18), transparent 58%),
      radial-gradient(720px 420px at 50% 120%, rgba(255, 255, 255, 0.06), transparent 70%),
      linear-gradient(160deg, var(--bg-0), var(--bg-1) 48%, var(--bg-2));
    color: var(--text-primary);
    font-family: var(--font-body), sans-serif;
    
    /* iOS Safe Area padding */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  h1,
  h2,
  h3,
  h4 {
    font-family: var(--font-display), sans-serif;
    letter-spacing: -0.015em;
  }

  ::selection {
    background: rgba(105, 169, 255, 0.4);
    color: #001226;
  }
  
  /* Disable iOS tap highlight */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* Disable text selection on interactive elements */
  button,
  a,
  .no-select {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Prevent elastic scrolling on iOS */
  html,
  body {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
}

@layer utilities {
  /* Animations */
  @keyframes slide-in-right {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes scale-in {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  @keyframes shimmer-wave {
    0% {
      background-position: -200% 0;
      opacity: 0.6;
    }
    50% {
      opacity: 1;
    }
    100% {
      background-position: 200% 0;
      opacity: 0.6;
    }
  }

  @keyframes pulse-glow {
    0%, 100% {
      opacity: 0.5;
    }
    50% {
      opacity: 0.8;
    }
  }

  .animate-slide-in-right {
    animation: slide-in-right 0.3s ease-out;
  }

  .animate-fade-in {
    animation: fade-in 0.2s ease-out;
  }

  .animate-scale-in {
    animation: scale-in 0.2s ease-out;
  }

  /* Skeleton loading - improved shimmer effect */
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--surface) 0%,
      var(--surface) 20%,
      rgba(255, 184, 107, 0.08) 40%,
      rgba(123, 125, 255, 0.06) 50%,
      rgba(255, 184, 107, 0.08) 60%,
      var(--surface) 80%,
      var(--surface) 100%
    );
    background-size: 200% 100%;
    animation: shimmer-wave 2s ease-in-out infinite;
    border-radius: 8px;
    position: relative;
    overflow: hidden;
  }

  /* Subtle glow effect for skeleton */
  .skeleton::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.03) 50%,
      transparent 100%
    );
    animation: shimmer 2s ease-in-out infinite;
  }

  /* Faster skeleton variant for smaller elements */
  .skeleton-fast {
    animation-duration: 1.5s;
  }

  /* Slower skeleton variant for larger elements */
  .skeleton-slow {
    animation-duration: 2.5s;
  }

  .surface-panel {
    @apply border rounded-2xl shadow-2xl;
    background: var(--surface);
    border-color: var(--line);
    backdrop-filter: blur(18px);
  }

  .surface-panel-strong {
    @apply border rounded-2xl shadow-2xl;
    background: var(--surface-strong);
    border-color: var(--line-strong);
    backdrop-filter: blur(22px);
  }

  .btn-primary {
    @apply inline-flex items-center justify-center rounded-xl px-5 py-3 font-semibold transition disabled:opacity-60 disabled:cursor-not-allowed;
    color: #20160b;
    background: linear-gradient(120deg, var(--accent), var(--accent-2));
  }

  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 18px 36px rgba(255, 184, 107, 0.28);
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center rounded-xl px-5 py-3 text-sm font-medium transition;
    color: var(--text-primary);
    border: 1px solid var(--line);
    background: rgba(16, 18, 28, 0.6);
  }

  .btn-ghost:hover {
    border-color: var(--line-strong);
    background: rgba(24, 26, 38, 0.9);
  }

  .hero-glow {
    position: relative;
  }

  .hero-glow::after {
    content: "";
    position: absolute;
    inset: -18% -6% auto -6%;
    height: 220px;
    border-radius: 9999px;
    background: radial-gradient(ellipse at center, rgba(255, 184, 107, 0.2), transparent 67%);
    filter: blur(24px);
    pointer-events: none;
    z-index: -1;
  }

  .grid-mesh {
    background-image:
      linear-gradient(rgba(255, 221, 171, 0.05) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 221, 171, 0.05) 1px, transparent 1px);
    background-size: 38px 38px;
  }

  /* Safe area for iOS */
  @supports (padding: max(0px)) {
    .safe-area-bottom {
      padding-bottom: max(1rem, env(safe-area-inset-bottom));
    }
    .safe-area-top {
      padding-top: max(1rem, env(safe-area-inset-top));
    }
    
    /* Support for iPhone X+ notch */
    .header,
    .navbar,
    nav {
      padding-top: calc(1rem + env(safe-area-inset-top));
    }
    .bottom-nav,
    footer {
      padding-bottom: calc(1rem + env(safe-area-inset-bottom));
    }
  }

  /* Minimum touch targets (44x44px) */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Hide scrollbar but keep functionality */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Mobile modal improvements */
  @media (max-width: 640px) {
    .modal-mobile-full {
      max-height: 100vh;
      max-width: 100vw;
      border-radius: 0;
    }
  }
}
